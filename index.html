<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fury</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <style>
    .round, .player {
        position: absolute;
    }
  </style>
    <body>
        <div id="board">
        </div>
      </body>
  <script>
    (()=>{
        const boardDom = document.getElementById('board');

        const getCoordinatesFromVector = (vector) => {
            return {
                x: Math.cos(vector.degrees * (3.14/180)) * vector.distance,
                y: Math.sin(vector.degrees * (3.14/180)) * vector.distance
            };
        };

        const drawDom = (data) => {
            const dom = document.getElementById(data.id);
            dom.style.left = `${data.x}%`;
            dom.style.top = `${data.y}%`;
        };

        const createDom = (data, className) => {
            const dom = document.createElement('div');
            dom.id = data.id;
            dom.classList.add(className);
            boardDom.appendChild(dom);
            return dom;
        };

        const createRound = (data) => {
            const dom = createDom(data, 'round');
            dom.innerText = `ðŸ’¥`;
        };

        const createPlayer = (data) => {
            const dom = createDom(data, 'player');
            dom.innerText = `ðŸ§`;
        };

        const gameData = {
            rounds: [{id: 100, x: 50, y: 50, degrees: 210, distance: 3}],
            players: [{id: 1, x: 50, y: 50, degrees: 90, distance: .5}]
        };

        gameData.rounds.forEach(r => createRound(r));
        gameData.players.forEach(p => createPlayer(p));

        const intervalId = setInterval(() => {

            [...gameData.rounds, ...gameData.players].forEach(a => {
                const updated = getCoordinatesFromVector(a);
                a.x = a.x + updated.x;
                a.y = a.y + updated.y;
            });

            [...gameData.rounds, ...gameData.players].forEach(a => drawDom(a));
        }, 100);

        document.addEventListener('keydown', (event) => {
            var newPos;
            if(event.code === 'ArrowDown') {
                newPos = {...playerPos, top: playerPos.top + moveIncrement}; 
            }});

    })();
  </script>
</html>
